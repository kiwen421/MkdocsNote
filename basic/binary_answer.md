本页面将介绍二分答案的使用。



### 定义

对可能的答案区间，使用二分枚举答案， 不断缩小范围，最终确定答案，一般用来求解满足某种条件的最大值或者最小值（最优解问题）



### 思路

给定条件$f(x)$ , 求满足条件的最小值,  $1 \le x \le 10^9$？

1. 首先可以确定的是 答案区间在$[1, 10^9]$之间， 满足单调性， 并且答案区间内有很多可行性解。

2. 二分答案区间，判断$mid$ 是否是可行性解，如果是，那么最优解应该出现在$[L, mid]$区间内， 更新记录$mid$； 否则最优解应该出现$[mid+1, R]$区间内。

3. 重复2操作，直到枚举所有的可能性答案。

???+ note "总结"

	1. 答案区间有边界，且满足单调性;
	2. 二分枚举答案区间，判断$f(mid)$是否可行， 将**求最优解问题**提转换为**判断可行性解问题**;
	3. 不断的执行2操作，找到最左或者最右的可行性解，即最优解。
	4. 二分答案最关键的不是在于枚举答案，而在于判断可行性解， 即`check`函数如何写，这个需要仔细设计。



### 代码模版

```cpp
bool check(int x){
  
  // 判断x是否是可行性解
}
// 二分答案 最小值
int binary_answer(int L, int R){
  int ret = -1;
  int mid;
  while (L <= R){
    mid = L + (R-L)>>1;
    if (check(mid)){   // 判断是否是可行性解
      ret = mid;     // 更新记录最小值
      R = mid - 1;
    } else L = mid + 1;
  }  
  return ret;
}

// 二分答案 最大值
int binary_answer(int L, int R){
  int ret = -1;
  int mid;
  while (L <= R){
    mid = L + (R-L)>>1;
    if (check(mid)){   // 判断是否满足条件
      ret = mid;     // 更新记录最大值
      L = mid + 1;
    } else R = mid - 1;
  }  
  return ret;
}
```



???+ note  "[Luogu P1873 砍树](https://www.luogu.com.cn/problem/P1873)"
    伐木工人米尔科需要砍倒 $M$ 米长的木材。这是一个对米尔科来说很容易的工作，因为他有一个漂亮的新伐木机，可以像野火一样砍倒森林。不过，米尔科只被允许砍倒单行树木。
    

    米尔科的伐木机工作过程如下：米尔科设置一个高度参数 $H$（米），伐木机升起一个巨大的锯片到高度 $H$，并锯掉所有的树比 $H$ 高的部分（当然，树木不高于 $H$ 米的部分保持不变）。米尔科就得到树木被锯下的部分。
    
    例如，如果一行树的高度分别为 $20,~15,~10,~17$，米尔科把锯片升到 $15$ 米的高度，切割后树木剩下的高度将是 $15,~15,~10,~15$，而米尔科将从第 $1$ 棵树得到 $5$ 米木材，从第 $4$ 棵树得到 $2$ 米木材，共 $7$ 米木材。
    
    米尔科非常关注生态保护，所以他不会砍掉过多的木材。这正是他尽可能高地设定伐木机锯片的原因。你的任务是帮助米尔科找到伐木机锯片的最大的整数高度 $H$，使得他能得到木材至少为 $M$ 米。即，如果再升高 $1$ 米锯片，则他将得不到 $M$ 米木材。
    
    ??? note "解题思路"
    	通过题意可知，伐木机可能的最大高度为其中最高树木的高度,设为x，我们可以在 $0$ 到 $x$ 中枚举答案，但是这种朴素写法肯定拿不到满分，因为从 $0$ 枚举到 $x$ 太耗时间。我们可以在 $[0, x]$ 的区间上进行二分作为答案，然后检查各个答案的可行性（一般使用贪心法）。**这就是二分答案。**
    
    ???+ note highlight "参考代码"
    	```cpp
    	--8<-- "docs/basic/code/binary_answer/luogu_P1873.cpp"
    	```
